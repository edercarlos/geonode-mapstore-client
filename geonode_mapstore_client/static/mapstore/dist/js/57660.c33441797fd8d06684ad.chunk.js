(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[57660],{521554:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ze});var n=r(667294),o=r.n(n),a=r(472986),i=r.n(a),l=r(757588),c=r(282467),s=r(965539),u=r(805346),p=r(414293),d=r.n(p);const f=function(e){var t=e.children,r=e.service,n=e.onChangeServiceProperty,a=void 0===n?function(){}:n,i=e.onToggleThumbnail,c=void 0===i?function(){}:i;return o().createElement("div",null,o().createElement(l.FormGroup,{controlId:"autoload",key:"autoload"},o().createElement(l.Col,{xs:12},void 0!==r.autoload&&o().createElement(l.Checkbox,{value:"autoload",onChange:function(e){return a("autoload",e.target.checked)},checked:!d()(r.autoload)&&r.autoload},o().createElement(u.Z,{msgId:"catalog.autoload"})))),o().createElement(l.FormGroup,{controlId:"thumbnail",key:"thumbnail"},o().createElement(l.Col,{xs:12},o().createElement(l.Checkbox,{onChange:function(){return c()},checked:!!d()(r.hideThumbnail)||!r.hideThumbnail},o().createElement(u.Z,{msgId:"catalog.showPreview"})))),t)};var m=r(112346),y=r(618446),S=r.n(y),g=r(929656);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(672632),r(203256),r(850231),r(796876);const h=function(e){var t=e.onValid,r=e.onError,a=e.json,i=void 0===a?{}:a,l=A((0,n.useState)(JSON.stringify(i,!0,2)),2),c=l[0],s=l[1],p=A((0,n.useState)(),2),d=p[0],f=p[1];return(0,n.useEffect)((function(){try{var e=JSON.parse(c);f(),t(e)}catch(e){f(e),r(e)}}),[c]),o().createElement("div",{className:"code-editor"},o().createElement(g.Controlled,{value:c,onBeforeChange:function(e,t,r){s(r)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),d&&o().createElement("div",{className:"error-area"},o().createElement("div",{className:"error-area-header"},o().createElement(u.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),o().createElement("div",{className:"error-area-body"},o().createElement(u.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:d.message}},(function(e){return o().createElement("pre",{className:"error-msg"},e)})))))};var b=r(615402),E=r(202576),O={options:{}};const w=function(e){var t=e.service,r=void 0===t?{}:t,n=e.setValid,a=void 0===n?function(){}:n,i=e.onToggleThumbnail,c=void 0===i?function(){}:i,s=e.onChangeServiceProperty,p=void 0===s?function(){}:s,f=r.options||r.variants?{options:r.options||{},variants:r.variants}:void 0;return o().createElement("div",null,o().createElement(l.FormGroup,{controlId:"autoload",key:"autoload"},o().createElement(l.Col,{xs:12},void 0!==r.autoload&&o().createElement(l.Checkbox,{key:"autoload",value:"autoload",onChange:function(e){return p("autoload",e.target.checked)},checked:!d()(r.autoload)&&r.autoload},o().createElement(u.Z,{msgId:"catalog.autoload"})),o().createElement(l.Checkbox,{key:"thumbnail",value:"thumbnail",onChange:function(){return c()},checked:!!d()(r.hideThumbnail)||!r.hideThumbnail},o().createElement(u.Z,{msgId:"catalog.showPreview"})),"tms"===r.provider?o().createElement(l.Checkbox,{key:"forceDefaultTileGrid",value:"forceDefaultTileGrid",onChange:function(e){return p("forceDefaultTileGrid",e.target.checked)},checked:!d()(r.forceDefaultTileGrid)&&r.forceDefaultTileGrid},o().createElement(u.Z,{msgId:"catalog.tms.forceDefaultTileGrid"})," ",o().createElement(E.Z,{text:o().createElement(u.Z,{msgId:"catalog.tms.forceDefaultTileGridDescription"})})):null),r.provider&&"custom"!==r.provider?null:o().createElement(l.Col,null,o().createElement(l.ControlLabel,null,o().createElement(u.Z,{msgId:"catalog.tms.customTMSConfiguration"}),"  ",o().createElement(E.Z,{text:o().createElement(b.Z,{msgId:"catalog.tms.customTMSConfigurationHint"})})),o().createElement(h,{json:f||O,onValid:function(e){var t=e.options,n=e.variants;S()(t,r.options)||p("options",t),S()(n,r.variants)||p("variants",n),a(!0)},onError:function(){r.options&&p("options",void 0),r.variants&&p("variants",void 0),a(!1)}}))))};var C=r(743129),j=r(576712),T=r(993451),P=r(771167),k=r.n(P),x=(r(799715),r(729589),r(121994),r(941106)),L=r.n(x),I=r(659551),B=r(950966);function F(){return F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F.apply(this,arguments)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D={mode:"xml",theme:"material",lineNumbers:!0,lineWrapping:!0,autoRefresh:!0,indentUnit:2,tabSize:2},_=function(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.className,a=void 0===n?"":n,i=e.tooltip;return o().createElement(B.Z,{placement:"bottom",overlay:i},o().createElement(l.Glyphicon,{style:{marginLeft:4},glyph:r,className:a}))},G=function(e){var t="catalog.filter.".concat(e,".info");return"error"===e&&(t="catalog.filter.error"),o().createElement(l.Tooltip,{id:"filter"},o().createElement(u.Z,{msgId:t}))},U=o().createElement(_,{tooltip:G("error"),glyph:"exclamation-mark",className:"text-danger"}),Q=o().createElement(l.HelpBlock,{style:{fontSize:12}},o().createElement(u.Z,{msgId:"catalog.filter.dynamic.helpText"})),V=function(e){var t=e.type,r=e.code,n=e.setCode,a=e.error,i="".concat(t,"Filter");return o().createElement(l.FormGroup,null,o().createElement(l.Col,{xs:4},o().createElement(l.ControlLabel,null,o().createElement(u.Z,{msgId:"catalog.filter.".concat(t,".label")})),o().createElement(_,{tooltip:G(t)}),a[t]&&U),o().createElement(l.Col,{xs:8,style:{marginBottom:5}},o().createElement(g.Controlled,{value:r[i],options:D,onBeforeChange:function(e,t,o){n(M(M({},r),{},N({},i,o)))}}),"dynamic"===t&&Q))};const W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChangeServiceProperty,r=void 0===t?function(){}:t,a=e.filter,i=(a=void 0===a?{}:a).staticFilter,l=a.dynamicFilter,c=(0,n.useState)({}),s=R(c,2),u=s[0],p=s[1],d=(0,n.useState)({staticFilter:i,dynamicFilter:l}),f=R(d,2),m=f[0],y=f[1],g={code:m,setCode:y,error:u},A=function(e){var t,r,n=L()(I._b)({filterXml:e,startPosition:1,maxRecords:4});return!(null!==(t=(new DOMParser).parseFromString(n,"application/xml"))&&void 0!==t&&null!==(r=t.getElementsByTagName("parsererror"))&&void 0!==r&&r.length)};return(0,n.useEffect)((function(){var e=A(m.staticFilter);e&&!S()(m.staticFilter,i)&&r("filter.staticFilter",m.staticFilter),p(M(M({},u),{},{static:!e}))}),[m.staticFilter]),(0,n.useEffect)((function(){var e=A(m.dynamicFilter);e&&!S()(m.dynamicFilter,l)&&r("filter.dynamicFilter",m.dynamicFilter),p(M(M({},u),{},{dynamic:!e}))}),[m.dynamicFilter]),o().createElement("div",{className:"catalog-csw-filters"},o().createElement(V,F({type:"static"},g)),o().createElement(V,F({type:"dynamic"},g)))};var H=r(23279),$=r.n(H),q=r(884238),X=r.n(q),J=r(435161),Y=r.n(J),K=r(957557),ee=r.n(K),te=r(640554),re=r.n(te),ne=r(815135);function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const se=function(e){var t=e.onChangeServiceProperty,r=void 0===t?function(){}:t,a=e.service,i=(0,ne.Z)(l.Button),c=le((0,n.useState)(X()(a.domainAliases)?a.domainAliases:{0:""}),2),s=c[0],p=c[1],d=le((0,n.useState)(1),2),f=d[0],m=d[1],y=(0,n.useCallback)($()((function(e){r("domainAliases",e)}),300),[]);(0,n.useEffect)((function(){y(s)}),[s]);var S=function(e){return function(t){var r=t.target;return p((function(t){return ae(ae({},t),{},ie({},e,r.value))}))}},g=function(e){return function(){return p((function(t){return ae({},ee()(t,[e]))}))}},A=Y()(s,(function(e,t){return o().createElement(l.Col,{xs:12,className:"form-group alias-item"},o().createElement(l.FormControl,{id:"alias-".concat(t),key:"alias-".concat(t),type:"text",value:e,onChange:S(t)}),0!==re()(t)&&o().createElement(i,{tooltip:o().createElement(u.Z,{msgId:"catalog.domainAliases.removeAliasTooltip"}),tooltipid:"add-alias-button",tooltipPosition:"left",className:"remove-alias",onClick:g(t)},o().createElement(l.Glyphicon,{glyph:"minus"})))}));return o().createElement(l.FormGroup,{controlId:"domain-aliases",key:"domain-aliases",className:"mapstore-catalog-domain-aliases"},o().createElement(l.Col,{xs:12},o().createElement(l.ControlLabel,null,o().createElement(u.Z,{msgId:"catalog.domainAliases.title"}))," ",o().createElement(E.Z,{text:o().createElement(u.Z,{msgId:"catalog.domainAliases.helpTooltip"})})),A,o().createElement(l.Col,{xs:12},o().createElement(i,{className:"add-alias",tooltip:o().createElement(u.Z,{msgId:"catalog.domainAliases.addAliasTooltip"}),tooltipid:"add-alias-button",tooltipPosition:"right",onClick:function(){m((function(e){return e+1})),p((function(e){return ae(ae({},e),{},ie({},f,""))}))}},o().createElement(l.Glyphicon,{glyph:"plus"}))))};var ue=["service","formatOptions","onChangeServiceFormat","onChangeServiceProperty","currentWMSCatalogLayerSize","selectedService","onFormatOptionsFetch","advancedRasterSettingsStyles","tileSizeOptions","isLocalizedLayerStylesEnabled","onChangeMetadataTemplate","onToggleTemplate"];function pe(){return pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pe.apply(this,arguments)}var de=(0,T.Z)("noResultsText")(C.ZP),fe=function(e){return e.map((function(e){return{label:"".concat(e,"x").concat(e),value:e}}))};const me=function(e){var t,r=e.service,a=e.formatOptions,i=void 0===a?j.QQ:a,c=e.onChangeServiceFormat,s=void 0===c?function(){}:c,p=e.onChangeServiceProperty,m=void 0===p?function(){}:p,y=(e.currentWMSCatalogLayerSize,e.selectedService,e.onFormatOptionsFetch),S=void 0===y?function(){}:y,g=e.advancedRasterSettingsStyles,A=void 0===g?{}:g,v=e.tileSizeOptions,h=void 0===v?[256,512]:v,b=e.isLocalizedLayerStylesEnabled,O=e.onChangeMetadataTemplate,w=void 0===O?function(){}:O,C=e.onToggleTemplate,T=void 0===C?function(){}:C,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ue);(0,n.useEffect)((function(){r.isNew&&m("autoSetVisibilityLimits",P.autoSetVisibilityLimits)}),[P.autoSetVisibilityLimits]);var x=fe(h);return o().createElement(f,pe({},P,{onChangeServiceProperty:m,service:r}),!(!b||d()(r.type))&&"wms"===r.type&&o().createElement(l.FormGroup,{controlId:"localized-styles",key:"localized-styles"},o().createElement(l.Col,{xs:12},o().createElement(l.Checkbox,{"data-qa":"service-lacalized-layer-styles-option",onChange:function(e){return m("localizedLayerStyles",e.target.checked)},checked:!d()(r.localizedLayerStyles)&&r.localizedLayerStyles},o().createElement(u.Z,{msgId:"catalog.enableLocalizedLayerStyles.label"})," ",o().createElement(E.Z,{text:o().createElement(u.Z,{msgId:"catalog.enableLocalizedLayerStyles.tooltip"})})))),o().createElement(l.FormGroup,{controlId:"autoSetVisibilityLimits",key:"autoSetVisibilityLimits"},o().createElement(l.Col,{xs:12},o().createElement(l.Checkbox,{onChange:function(e){return m("autoSetVisibilityLimits",e.target.checked)},checked:!d()(r.autoSetVisibilityLimits)&&r.autoSetVisibilityLimits},o().createElement(u.Z,{msgId:"catalog.autoSetVisibilityLimits.label"})," ",o().createElement(E.Z,{text:o().createElement(u.Z,{msgId:"catalog.autoSetVisibilityLimits.tooltip"})})))),!d()(r.type)&&"csw"===r.type&&!r.excludeShowTemplate&&o().createElement(l.FormGroup,{controlId:"metadata-template",key:"metadata-template",className:"metadata-template-editor"},o().createElement(l.Col,{xs:12},o().createElement(l.Checkbox,{onChange:function(){return T()},checked:r&&r.showTemplate},o().createElement(u.Z,{msgId:"catalog.showTemplate"})),o().createElement("br",null)),r&&r.showTemplate&&o().createElement(l.Col,{xs:12},o().createElement("span",null,o().createElement("p",null,o().createElement(u.Z,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}}),"  "),o().createElement("pre",null,o().createElement(u.Z,{msgId:"catalog.templateFormatDescriptionExample"})," ${ description }"))),o().createElement(l.Col,{xs:12},r&&r.showTemplate&&o().createElement(k(),{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["link"]]},value:r.metadataTemplate||"",onChange:function(e){w(e&&"<p><br></p>"!==e?e:"")}}))),o().createElement(l.FormGroup,{style:A},o().createElement(l.Col,{xs:6},o().createElement(l.ControlLabel,null,"Format")),o().createElement(l.Col,{xs:6,style:{marginBottom:"5px"}},o().createElement(de,{isLoading:P.formatsLoading,onOpen:function(){return S(r.url)},value:r&&r.format,clearable:!0,noResultsText:P.formatsLoading?"catalog.format.loading":"catalog.format.noOption",options:P.formatsLoading?[]:i,onChange:function(e){return s(e&&e.value)}}))),o().createElement(l.FormGroup,{style:A},o().createElement(l.Col,{xs:6},o().createElement(l.ControlLabel,null,"WMS Layer tile size")),o().createElement(l.Col,{xs:6,style:{marginBottom:"5px"}},o().createElement(de,{value:fe([(null===(t=r.layerOptions)||void 0===t?void 0:t.tileSize)||256])[0],options:x,onChange:function(e){return m("layerOptions",{tileSize:e&&e.value})}}))),!d()(r.type)&&"csw"===r.type&&o().createElement(W,{filter:null==r?void 0:r.filter,onChangeServiceProperty:m}),!d()(r.type)&&"wms"===r.type&&o().createElement(se,{service:r,onChangeServiceProperty:m}))};var ye=["onToggleAdvancedSettings"];const Se=function(e){var t=e.onToggleAdvancedSettings,r=void 0===t?function(){}:t,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ye),a=n.service,i=void 0===a?{}:a,l=function(e){switch(e){case"tms":return w;case"wmts":case"wfs":default:return f;case"wms":case"csw":return me}}(i.type);return o().createElement(m.Z,{useToolbar:!0,title:o().createElement(u.Z,{msgId:"catalog.advancedSettings"}),expanded:!d()(i.showAdvancedSettings)&&i.showAdvancedSettings,onSwitch:r},o().createElement(l,n))};var ge=r(227361),Ae=r.n(ge),ve=r(313311),he=r.n(ve),be=r(463202),Ee=r(608575);function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var we=function(e){for(var t=0,r=Object.entries({wfs:"e.g. https://mydomain.com/geoserver/wfs",wmts:"e.g. https://mydomain.com/geoserver/gwc/service/wmts",wms:"e.g. https://mydomain.com/geoserver/wms",csw:"e.g. https://mydomain.com/geoserver/csw",tms:"e.g. https://mydomain.com/geoserver/gwc/service/tms/1.0.0"});t<r.length;t++){var n=(i=r[t],l=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(i,l)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oe(e,t):void 0}}(i,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];if(o===e.type)return a}var i,l;return!0},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=Ee.parse(null!=t?t:window.location.href),n=r.protocol,o=Ee.parse(e),a=o.protocol;return"https:"!==n||!a||n===a},je=r(836882);function Te(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ke=(0,T.Z)("placeholder")(l.FormControl),xe="custom",Le="tms",Ie=function(e){var t=e.service,r=void 0===t?{}:t,n=e.onChangeUrl,a=void 0===n?function(){}:n;return o().createElement(l.FormGroup,{controlId:"URL"},o().createElement(l.Col,{xs:12},o().createElement(l.ControlLabel,null,o().createElement(u.Z,{msgId:"catalog.url"})),o().createElement(ke,{type:"text",style:{textOverflow:"ellipsis"},placeholder:we(r),value:r&&r.url,onChange:function(e){return a(e.target.value)}})))},Be=function(e){return e===Le?"TMS 1.0.0":e},Fe=function(e){var t,r,n,a,i=e.serviceTypes,c=void 0===i?[]:i,s=e.onChangeServiceProperty,p=e.service,d=void 0===p?{}:p,f=e.onChangeUrl,m=void 0===f?function(){}:f,y=e.onChangeTitle,S=void 0===y?function(){}:y,g=(0,be.u8)("allowedProviders")||Ae()(he()(c||[],{name:"tms"}),"allowedProviders")||[],A=Object.keys(je.Z).filter((function(e){return"ALL"===g||g.indexOf(e)>=0})),v=d===Le?d:null==d||null===(t=d.provider)||void 0===t||null===(r=t.split)||void 0===r||null===(n=r.call(t,"."))||void 0===n?void 0:n[0],h=!v||v===xe,O=v===Le,w=O||h;return o().createElement(l.FormGroup,null,o().createElement(l.Col,{xs:12,sm:h?3:12,md:w?3:12},o().createElement(l.ControlLabel,null,o().createElement(u.Z,{msgId:"catalog.tms.provider"})),o().createElement(ke,{onChange:function(e){var t=e.target.value;s("provider","".concat(t)),t!==xe&&t!==Le?S(t):h||O||S("")},value:v,componentClass:"select"},[xe,Le].concat((a=A,function(e){if(Array.isArray(e))return Pe(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||Te(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(e){return{name:e,label:Be(e)}})).map((function(e){return o().createElement("option",{value:e.name,key:e.name},e.label)})))),o().createElement(l.Col,{xs:12,sm:9,md:9},h?o().createElement(o().Fragment,null,o().createElement(l.ControlLabel,null,o().createElement(u.Z,{msgId:"catalog.tms.urlTemplate"}),"  ",o().createElement(E.Z,{text:o().createElement(b.Z,{msgId:"catalog.tms.urlTemplateHint"})})),o().createElement(ke,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"e.g. https://{s}.myUrl.com/{variant}/{z}/{x}/{y}",value:d&&d.url,onChange:function(e){return m(e.target.value)}})):O?o().createElement(o().Fragment,null,o().createElement(l.ControlLabel,null,o().createElement(u.Z,{msgId:"catalog.url"})),o().createElement(ke,{type:"text",style:{textOverflow:"ellipsis"},placeholder:we(d),value:d&&d.url,onChange:function(e){return m(e.target.value)}})):null))};const Re=function(e){var t,r,a=e.service,i=void 0===a?{}:a,c=e.serviceTypes,s=e.onChangeTitle,p=e.onChangeUrl,d=e.onChangeServiceProperty,f=e.onChangeType,m=e.setValid,y=void 0===m?function(){}:m,S=(t=(0,n.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(t,r)||Te(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=S[0],A=S[1],v="tms"===i.type?Fe:Ie;return o().createElement(l.Form,{horizontal:!0},o().createElement(l.FormGroup,{controlId:"title",key:"type-title-row"},o().createElement(l.Col,{key:"type",xs:12,sm:3,md:3},o().createElement(l.ControlLabel,null,o().createElement(u.Z,{msgId:"catalog.type"})),o().createElement(ke,{onChange:function(e){return f(e.target.value)},value:i&&i.type,componentClass:"select"},c.map((function(e){return o().createElement("option",{value:e.name,key:e.name},e.label)})))),o().createElement(l.Col,{key:"title",xs:12,sm:9,md:9},o().createElement(l.ControlLabel,null,o().createElement(u.Z,{msgId:"catalog.serviceTitle"})),o().createElement(ke,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.serviceTitlePlaceholder",value:i&&i.title,onChange:function(e){return s(e.target.value)}}))),o().createElement(v,{key:"url-row",serviceTypes:c,service:i,onChangeUrl:function(e){if(p(e),e){var t=!Ce(e);A(t),y(!t)}},onChangeTitle:s,onChangeServiceProperty:d}),g?o().createElement(l.Alert,{bsStyle:"danger"},o().createElement(u.Z,{msgId:"catalog.invalidUrlHttpProtocol"})):null)};function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const ze=function(e){var t,r,a=e.service,p=void 0===a?{title:"",type:"wms",url:"",format:"image/png"}:a,d=e.serviceTypes,f=void 0===d?[{name:"csw",label:"CSW"}]:d,m=e.onChangeTitle,y=void 0===m?function(){}:m,S=e.onChangeUrl,g=void 0===S?function(){}:S,A=e.onChangeType,v=void 0===A?function(){}:A,h=e.id,b=e.urlTooltip,E=e.formatOptions,O=e.buttonStyle,w=e.saving,C=e.onChangeServiceFormat,j=void 0===C?function(){}:C,T=e.onChangeMetadataTemplate,P=void 0===T?function(){}:T,k=e.onToggleAdvancedSettings,x=void 0===k?function(){}:k,L=e.onChangeServiceProperty,I=void 0===L?function(){}:L,B=e.onToggleTemplate,F=void 0===B?function(){}:B,R=e.onToggleThumbnail,Z=void 0===R?function(){}:R,z=e.onAddService,M=void 0===z?function(){}:z,N=e.onDeleteService,D=void 0===N?function(){}:N,_=e.onChangeCatalogMode,G=void 0===_?function(){}:_,U=e.onFormatOptionsFetch,Q=void 0===U?function(){}:U,V=e.selectedService,W=e.isLocalizedLayerStylesEnabled,H=e.tileSizeOptions,$=void 0===H?[256,512]:H,q=e.formatsLoading,X=e.layerOptions,J=void 0===X?{}:X,Y=e.services,K=e.autoSetVisibilityLimits,ee=void 0!==K&&K,te=(t=(0,n.useState)(!0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ze(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),re=te[0],ne=te[1];return o().createElement(s.Z,{bodyClassName:"ms2-border-layout-body catalog",header:o().createElement(Re,{setValid:ne,service:p,serviceTypes:f,onChangeTitle:y,onChangeUrl:g,onChangeType:v,onChangeServiceProperty:I,urlTooltip:b})},o().createElement(l.Form,null,o().createElement(Se,{setValid:ne,id:h,service:p,formatOptions:E,buttonStyle:O,saving:w,onChangeServiceFormat:j,onChangeMetadataTemplate:P,onToggleAdvancedSettings:x,onChangeServiceProperty:I,onToggleTemplate:F,onToggleThumbnail:Z,isLocalizedLayerStylesEnabled:W,tileSizeOptions:$,currentWMSCatalogLayerSize:J.tileSize?J.tileSize:256,selectedService:V,onFormatOptionsFetch:Q,formatsLoading:q,autoSetVisibilityLimits:ee}),o().createElement(l.FormGroup,{controlId:"buttons",key:"buttons"},o().createElement(l.Col,{xs:12},o().createElement(c.Z,{style:O,disabled:w||!re,onClick:function(){return M()},key:"catalog_add_service_button"},w?o().createElement(i(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null,o().createElement(u.Z,{msgId:"save"})),p&&!p.isNew?o().createElement(c.Z,{style:O,onClick:function(){return D(p,Y)},key:"catalog_delete_service_button"},o().createElement(u.Z,{msgId:"catalog.delete"})):null,o().createElement(c.Z,{style:O,disabled:w,onClick:function(){return G("view")},key:"catalog_back_view_button"},o().createElement(u.Z,{msgId:"cancel"}))))))}},965539:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(667294),o=r.n(n);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=function(e){var t=e.id,r=e.children,n=e.header,a=e.footer,l=e.columns,c=e.height,s=e.style,u=void 0===s?{}:s,p=e.className,d=e.bodyClassName,f=void 0===d?"ms2-border-layout-body":d;return o().createElement("div",{id:t,className:p,style:i({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden"},u)},n,o().createElement("div",{className:f,style:{display:"flex",flex:1,overflowY:"auto"}},o().createElement("main",{className:"ms2-border-layout-content",style:{flex:1}},c?o().createElement("div",{style:{height:c}},r):r),c?o().createElement("div",{style:{height:c}},l):l),a)}},416919:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(667294),o=r.n(n),a=r(732833),i=r(965539),l=r(418093),c=r(757588),s=r(282467),u={bottom:{true:"chevron-down",false:"chevron-up"},top:{true:"chevron-up",false:"chevron-down"},right:{true:"chevron-right",false:"chevron-left"},left:{true:"chevron-left",false:"chevron-right"}};const p=function(e){var t=e.position,r=void 0===t?"right":t,n=e.onClose,a=e.bsStyle,i=void 0===a?"default":a,l=e.title,p=void 0===l?"":l,d=e.fullscreen,f=void 0!==d&&d,m=e.showFullscreen,y=void 0!==m&&m,S=e.glyph,g=void 0===S?"info-sign":S,A=e.additionalRows,v=e.onFullscreen,h=void 0===v?function(){}:v,b=n?o().createElement(s.Z,{key:"ms-header-close",className:"square-button ms-close",onClick:n,bsStyle:i},o().createElement(c.Glyphicon,{glyph:"1-close"})):null,E=y?o().createElement(s.Z,{key:"ms-header-glyph",className:"square-button",bsStyle:i,onClick:function(){return h(!f)}},o().createElement(c.Glyphicon,{glyph:u[r]&&u[r][f]||"resize-full"})):o().createElement("div",{key:"ms-header-glyph",className:"square-button ".concat("bg-"+i),style:{display:"flex"}},o().createElement(c.Glyphicon,{glyph:g,className:"".concat("default"===i?"text-primary":"")})),O="left"===r?[b,E]:[E,b];return o().createElement(c.Grid,{fluid:!0,style:{width:"100%"},className:"ms-header ms-"+i},o().createElement(c.Row,null,o().createElement(c.Col,{xs:2},O[0]),o().createElement(c.Col,{xs:8},o().createElement("h4",null,p)),o().createElement(c.Col,{xs:2},O[1])),A)},d=(0,l.withState)("fullscreen","onFullscreen",!1)((function(e){var t=e.fluid,r=e.className,n=void 0===r?"":r,l=e.fullscreen,c=void 0!==l&&l,s=e.position,u=e.open,d=e.size,f=void 0===d?550:d,m=e.style,y=void 0===m?{}:m,S=e.zIndex,g=void 0===S?1030:S,A=e.onClose,v=e.bsStyle,h=e.title,b=e.showFullscreen,E=void 0!==b&&b,O=e.glyph,w=e.header,C=e.footer,j=e.children,T=e.onFullscreen,P=void 0===T?function(){}:T,k=e.fixed,x=void 0!==k&&k,L=e.resizable,I=void 0!==L&&L,B=e.hideHeader;return o().createElement("div",{className:"ms-side-panel "+(x?"":"ms-absolute-dock ")+(I?"":"react-dock-no-resize ")+n},o().createElement(a.default,{fluid:t||c,position:s,dimMode:"none",isVisible:u,size:c?1:f,dockStyle:y,zIndex:g},o().createElement(i.Z,{header:!B&&u&&o().createElement(p,{position:s,onClose:A,bsStyle:v,title:h,fullscreen:c,showFullscreen:E,glyph:O,additionalRows:w,onFullscreen:P}),footer:u&&C},u&&j)))}))},357660:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_ALLOWED_PROVIDERS:()=>_t,default:()=>Wt});var n=r(893379),o=r.n(n),a=r(452702);o()(a.Z,{insert:"head",singleton:!1}),a.Z.locals;var i=r(727418),l=r.n(i),c=r(675263),s=r.n(c),u=r(667294),p=r.n(u),d=r(757588),f=r(496259),m=r(533664),y=r(418093),S=r(22222),g=r(53001),A=r(931273),v=r(782904),h=r(580416),b=r(864152),E=r(414293),O=r.n(E),w=r(282467),C=r(743129),j=r(965539),T=r(86638),P=r(805346),k=r(513218),x=r.n(k),L=r(91175),I=r.n(L),B=r(701469),F=r.n(B),R=r(92742),Z=r.n(R),z=r(576712),M=r(986267),N=r(121222),D=r(59286),_=r(950966),G=r(774855),U=r.n(G),Q=r(233044);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t){return $=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$(e,t)}function q(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return X(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(i,e);var t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(n);if(o){var r=J(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return q(this,e)});function i(){var e;W(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Y(X(e=a.call.apply(a,[this].concat(r))),"state",{showCopiedToolTip:!1}),e}return t=i,r=[{key:"render",value:function(){var e=this;if(!this.props.url)return null;var t=this.props.addAuthentication?(0,Q.addAuthenticationToUrl)(this.props.url):this.props.url,r=this.state.showCopiedToolTip?"catalog.copied":"catalog.copyToClipboard",n=p().createElement(d.Tooltip,{id:"tooltip"},p().createElement(P.Z,{msgId:r})),o=p().createElement(U(),{text:t,onCopy:this.props.onCopy},p().createElement(_.Z,{placement:"right",overlay:n,onExited:function(){return e.setState({showCopiedToolTip:!1})}},p().createElement(w.Z,{bsSize:this.props.bsSize,bsStyle:"primary",className:"link-button",onClick:function(){return e.setState({showCopiedToolTip:!0})}},p().createElement(d.Glyphicon,{glyph:"paperclip"})," ",this.props.labelId&&p().createElement(P.Z,{msgId:this.props.labelId}))));return p().createElement("div",{className:"link-sharing"},p().createElement(d.FormGroup,{bsSize:this.props.bsSize},p().createElement(d.FormControl,{className:"link-input",type:"text",value:t,onChange:function(){}}),o))}}],r&&H(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(p().Component);Y(K,"propTypes",{url:s().string.isRequired,labelId:s().string,onCopy:s().func,bsSize:s().string,addAuthentication:s().bool}),Y(K,"defaultProps",{onCopy:function(){},bsSize:"small",addAuthentication:!1});const ee=K;function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}var re=["links","buttonSize"];function ne(){return ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ne.apply(this,arguments)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t){return ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ie(e,t)}function le(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}var se,ue,pe,de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(i,e);var t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ce(n);if(o){var r=ce(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return le(this,e)});function i(){return oe(this,i),a.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){if(!this.props.links||0===this.props.links.length)return null;var e=this.props,t=e.links,r=e.buttonSize,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,re),o=t.map((function(e,t){return p().createElement(ee,ne({key:t,url:e.url,labelId:e.labelId},n))})),a=p().createElement(d.Popover,{className:"links-popover",id:"links-popover"},p().createElement("h5",null,p().createElement(P.Z,{msgId:"catalog.share"})),o);return p().createElement(_.Z,{container:this.props.popoverContainer,positionLeft:150,placement:"top",trigger:"click",overlay:a},p().createElement(w.Z,{bsSize:r,className:"square-button-md",bsStyle:"primary"},p().createElement(d.Glyphicon,{glyph:"link"})))}}])&&ae(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(p().Component);se=de,ue="propTypes",pe={links:s().array,onCopy:s().func,messages:s().object,locale:s().string,buttonSize:s().string,popoverContainer:s().object,addAuthentication:s().bool},ue in se?Object.defineProperty(se,ue,{value:pe,enumerable:!0,configurable:!0,writable:!0}):se[ue]=pe;const fe=de;var me=r(876424),ye=r(80717),Se=r(815135),ge=r(975480),Ae=r(505055),ve=r.n(Ae),he=r(375875),be=r.n(he),Ee=["record","service","children","addLayer"];function Oe(){return Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oe.apply(this,arguments)}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ce=(0,Se.Z)(w.Z);const je=function(e){var t,r,n=e.record,o=e.service,a=e.children,i=e.addLayer,l=void 0===i?function(){}:i,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ee),s=(t=(0,u.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=s[0],f=s[1];return p().createElement(Ce,Oe({disabled:d},c,{onClick:function(){var e;f(!0),(e=n.tileMapUrl,be().get(e).then((function(e){return new Promise((function(t){ve().parseString(e.data,{explicitArray:!1},(function(e,r){return t(r)}))}))}))).then((function(e){f(!1),l((0,z.oR)(n,e,o))}))}}),d?p().createElement(ge.Z,null):a)};var Te=["record","service","children","addLayer"];function Pe(){return Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pe.apply(this,arguments)}var ke=(0,Se.Z)(w.Z);const xe=function(e){var t=e.record,r=e.service,n=e.children,o=e.addLayer,a=void 0===o?function(){}:o,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Te);return p().createElement(ke,Pe({},i,{onClick:function(){a((0,z.eX)(t,r))}}),n)};var Le=r(203932),Ie=r.n(Le),Be=r(507872),Fe=r(728753),Re=r.n(Fe),Ze=r(552259);function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){He(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ue(e,t){return Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ue(e,t)}function Qe(e,t){if(t&&("object"===ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ve(e)}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $e=(0,Se.Z)(w.Z),qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(i,e);var t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=We(n);if(o){var r=We(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Qe(this,e)});function i(){var e;_e(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return He(Ve(e=a.call.apply(a,[this].concat(r))),"state",{visibleExpand:!1}),He(Ve(e),"getTitle",(function(t){return x()(t)?t[e.props.currentLocale]||t.default:t||""})),He(Ve(e),"renderThumb",(function(t,r){var n=t||Ie();return p().createElement(d.Image,{className:"preview",src:n,alt:r&&e.getTitle(r.title)})})),He(Ve(e),"getFormats",(function(t,r){var n,o,a;return"wms"===t&&(n=(null===(o=e.props)||void 0===o||null===(a=o.service)||void 0===a?void 0:a.format)&&[e.props.service.format]),n||r.format&&[r.format]||r.formats})),He(Ve(e),"renderButtons",(function(t,r){if(!t||!t.references)return null;var n=(0,z.tW)(t),o=n.wms,a=n.wmts,i=n.tms,l=n.wfs,c=(0,z.FJ)(t).esri,s=t&&t.background,u=t&&"tileprovider"===t.type&&t.provider,f=[];if(s&&f.push(r?p().createElement(P.Z,{msgId:"catalog.backgroundAlreadyAdded"}):p().createElement($e,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){var t=De(De({},s),{},{id:s.name,visibility:!1});e.props.onLayerAdd(t,{background:s})},key:"addlayer"},p().createElement(d.Glyphicon,{glyph:"plus"}))),o||a){var m=o?"wms":"wmts";f.push(p().createElement($e,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){var r=e.makeLayer(m,o||a,e.getFormats(m,t));r&&e.addLayer(r,{record:t})},key:"add".concat(m,"layer")},p().createElement(d.Glyphicon,{glyph:"plus"})))}if(c&&f.push(p().createElement($e,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){e.addLayer((0,z.AD)(e.props.record,e.props.layerBaseConfig))},key:"addesrilayer"},p().createElement(d.Glyphicon,{glyph:"plus"}))),i&&f.push(p().createElement(je,{service:e.props.service,key:"addTmsLayer",tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,addLayer:e.addLayer,record:e.props.record},p().createElement(d.Glyphicon,{glyph:"plus"}))),l&&f.push(p().createElement($e,{tooltipId:"catalog.addToMap",key:"addWFSLayer",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){e.addLayer((0,z.LZ)(e.props.record,e.props.layerBaseConfig))}},p().createElement(d.Glyphicon,{glyph:"plus"}))),u&&f.push(p().createElement(xe,{key:"addTileProviderLayer",service:e.props.service,tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,addLayer:e.addLayer,record:e.props.record},p().createElement(d.Glyphicon,{glyph:"plus"}))),e.props.showGetCapLinks){var y=(0,z.F8)(t);y.length>0&&f.push(p().createElement(fe,{key:"sharing-links",popoverContainer:Ve(e),links:y,onCopy:e.props.onCopy,buttonSize:e.props.buttonSize,addAuthentication:e.props.addAuthentication}))}return f})),He(Ve(e),"renderDescription",(function(t){if(!t)return null;var r=(0,T.S$)(e.context.messages,"catalog.notAvailable");return e.state.fullText&&t.metadataTemplate?p().createElement("div",{className:"catalog-metadata ql-editor"},p().createElement(N.Z,{html:(0,D.parseCustomTemplate)(t.metadataTemplate,t.metadata,(function(e){return"".concat(Z()(e.substring(2,e.length-1))," ").concat(r)}))})):t.metadataTemplate?"":F()(t.description)?t.description.join(", "):t.description})),He(Ve(e),"isLinkCopied",(function(t){return e.state[t]})),He(Ve(e),"setLinkCopiedStatus",(function(t,r){e.setState(He({},t,r))})),He(Ve(e),"getLayerFormat",(function(t){return 0===t.length||t.filter((function(t){return t===e.props.defaultFormat})).length>0?e.props.defaultFormat:t[0]})),He(Ve(e),"makeLayer",(function(t,r){var n,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[e.props.defaultFormat],i=(0,z.n0)(r.SRS);if(r.SRS.length>0&&!(0,M.isAllowedSRS)(e.props.crs,i))return e.props.onError("catalog.srs_not_allowed"),null;var l=e.props.service&&e.props.service.localizedLayerStyles,c=null===(n=e.props)||void 0===n||null===(o=n.service)||void 0===o?void 0:o.autoSetVisibilityLimits;return(0,z.ll)(e.props.record,t,De({removeParams:e.props.authkeyParamNames},"wms"===t?De({catalogURL:"csw"===e.props.catalogType&&e.props.catalogURL?e.props.catalogURL+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+e.props.record.identifier:null,format:e.getLayerFormat(a.filter((function(e){return 0===e.indexOf("image/")}))),formats:{imageFormats:e.props.formatOptions,infoFormats:e.props.infoFormatOptions}},c&&{map:{projection:e.props.crs,resolutions:(0,Ze.getResolutions)()}}):{format:e.getLayerFormat(a.filter((function(e){return 0===e.indexOf("image/")})))}),e.props.layerBaseConfig,l)})),He(Ve(e),"addLayer",(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.background;if("backgroundSelector"===e.props.source)n?(e.props.onLayerAdd(De(De({},t),{},{group:"background"}),{source:e.props.source}),e.props.onAddBackground(t.id)):e.props.onAddBackgroundProperties({editing:!1,layer:t},!0);else{var o=e.props.zoomToLayer;e.props.onLayerAdd(t,{zoomToLayer:o})}})),He(Ve(e),"displayExpand",(function(){return(e.descriptionRuler?e.descriptionRuler.clientWidth:0)>(e.sideCardDesc?e.sideCardDesc.clientWidth:0)})),e}return t=i,(r=[{key:"componentDidMount",value:function(){var e=(0,T.S$)(this.context.messages,"catalog.notAvailable"),t=this.props.record;this.setState({visibleExpand:!this.props.hideExpand&&(this.displayExpand()||!!(this.props.showTemplate&&t&&t.metadataTemplate&&(0,D.parseCustomTemplate)(t.metadataTemplate,t.metadata,(function(t){return"".concat(Z()(t.substring(2,t.length-1))," ").concat(e)}))))})}},{key:"UNSAFE_componentWillMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"render",value:function(){var e,t=this,r=this.props.record,n=(0,z.tW)(r),o=n.wms,a=n.wmts,i=n.tms,l=n.wfs,c=(0,z.FJ)(r).esri,s=r&&"tileprovider"===r.type&&r.provider,u=r&&r.background,d=u&&I()((this.props.layers||[]).filter((function(e){return e.id===u.name||e.type===u.type&&e.source===u.source&&e.name===u.name})));return r?p().createElement("div",null,p().createElement(me.Z,{style:{transform:"none",opacity:d?.4:1},fullText:this.state.fullText,preview:!this.props.hideThumbnail&&this.renderThumb(r&&r.thumbnail||u&&(u.name||u.source?Be.Z[u.source][u.name]:Re()),r),title:r&&this.getTitle(r.title),description:p().createElement("span",null,p().createElement("div",{className:!0,ref:function(e){t.sideCardDesc=e}},this.renderDescription(r))),caption:p().createElement("div",null,!this.props.hideIdentifier&&p().createElement("div",{className:"identifier"},r&&r.identifier),p().createElement("div",null,!o&&!a&&!c&&!u&&!i&&!s&&!l&&p().createElement("small",{className:"text-danger"},p().createElement(P.Z,{msgId:"catalog.missingReference"}))),!this.props.hideExpand&&p().createElement("div",{className:"ms-ruler",style:{visibility:"hidden",height:0,whiteSpace:"nowrap",position:"absolute"},ref:function(e){t.descriptionRuler=e}},this.renderDescription(r))),tools:p().createElement(ye.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:10}},buttons:[].concat((e=(r&&this.renderButtons(r,d)||[]).map((function(e){return{Element:function(){return e}}})),function(e){if(Array.isArray(e))return Me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:this.state.fullText?"chevron-down":"chevron-left",visible:this.state.visibleExpand,tooltipId:this.state.fullText?"collapse":"expand",onClick:function(){return t.setState({fullText:!t.state.fullText})}}])})})):null}}])&&Ge(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(p().Component);He(qe,"propTypes",{addAuthentication:s().bool,authkeyParamNames:s().array,buttonSize:s().string,catalogURL:s().string,catalogType:s().string,crs:s().string,currentLocale:s().string,hideThumbnail:s().bool,hideExpand:s().bool,hideIdentifier:s().bool,layerBaseConfig:s().object,onCopy:s().func,onError:s().func,onLayerAdd:s().func,record:s().object,showGetCapLinks:s().bool,zoomToLayer:s().bool,onPropertiesChange:s().func,onLayerChange:s().func,layers:s().array,onAdd:s().func,source:s().string,onAddBackgroundProperties:s().func,deletedId:s().string,clearModal:s().func,service:s().service,showTemplate:s().bool,defaultFormat:s().string,formatOptions:s().array,infoFormatOptions:s().array}),He(qe,"defaultProps",{buttonSize:"small",crs:"EPSG:3857",currentLocale:"en-US",onAddBackgroundProperties:function(){},hideThumbnail:!1,hideIdentifier:!1,hideExpand:!1,layerBaseConfig:{},onCopy:function(){},onError:function(){},onLayerAdd:function(){},onPropertiesChange:function(){},onLayerChange:function(){},clearModal:function(){},style:{},showGetCapLinks:!1,zoomToLayer:!0,layers:[],onAdd:function(){},source:"metadataExplorer",showTemplate:!1,changeLayerProperties:function(){},defaultFormat:"image/png"}),He(qe,"contextTypes",{messages:s().object});const Xe=qe;function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ye(){return Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ye.apply(this,arguments)}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tt(e,t){return tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},tt(e,t)}function rt(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nt(e)}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}function at(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}(i,e);var t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ot(n);if(o){var r=ot(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return rt(this,e)});function i(){var e;Ke(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return at(nt(e=a.call.apply(a,[this].concat(r))),"renderRecordItem",(function(t){var r=e.props.recordItem||Xe;return p().createElement(d.Col,Ye({},e.props.column,{key:t.identifier}),p().createElement(r,{crs:e.props.crs,clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,onAddBackground:e.props.onAddBackground,source:e.props.source,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,hideThumbnail:e.props.hideThumbnail,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onError:e.props.onError,catalogURL:e.props.catalogURL,catalogType:e.props.catalogType,service:e.props.service,showTemplate:e.props.showTemplate,record:t,authkeyParamNames:e.props.authkeyParamNames,style:{height:"215px",maxHeight:"215px"},showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,defaultFormat:e.props.defaultFormat,formatOptions:e.props.formatOptions,infoFormatOptions:e.props.infoFormatOptions,layerBaseConfig:e.props.layerBaseConfig}))})),e}return t=i,(r=[{key:"render",value:function(){if(this.props.records){var e=this.props.records instanceof Array?this.props.records:[this.props.records];return p().createElement(d.Grid,{className:"record-grid",fluid:!0,style:this.props.style},p().createElement(d.Row,null,e.map(this.renderRecordItem)))}return null}}])&&et(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(p().Component);at(it,"propTypes",{crs:s().string,recordItem:s().element,catalogURL:s().string,catalogType:s().string,zoomToLayer:s().bool,onLayerAdd:s().func,onPropertiesChange:s().func,onError:s().func,records:s().array,authkeyParamNames:s().array,style:s().object,showGetCapLinks:s().bool,addAuthentication:s().bool,column:s().object,currentLocale:s().string,hideThumbnail:s().bool,hideIdentifier:s().bool,hideExpand:s().bool,source:s().string,onAddBackgroundProperties:s().func,modalParams:s().object,layers:s().object,clearModal:s().func,onAddBackground:s().func,showTemplate:s().bool,service:s().object,defaultFormat:s().string,formatOptions:s().array,infoFormatOptions:s().array,layerBaseConfig:s().object}),at(it,"defaultProps",{column:{xs:12},currentLocale:"en-US",onLayerAdd:function(){},onPropertiesChange:function(){},onError:function(){},records:[],zoomToLayer:!0,layerBaseConfig:{},crs:"EPSG:3857"});const lt=it;var ct=r(532425);function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ut(){return ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ut.apply(this,arguments)}function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){vt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yt(e,t){return yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yt(e,t)}function St(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gt(e)}function gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(e){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},At(e)}function vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yt(e,t)}(i,e);var t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=At(n);if(o){var r=At(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return St(this,e)});function i(){var e;ft(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vt(gt(e=a.call.apply(a,[this].concat(r))),"state",{catalogURL:null}),vt(gt(e),"onSearchTextChange",(function(t){e.props.onChangeText(t.target.value)})),vt(gt(e),"onKeyDown",(function(t){13===t.keyCode&&e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})})),vt(gt(e),"getServices",(function(){return Object.keys(e.props.services).map((function(t){var r=e.props.services[t];return l()({},{label:r.titleMsgId?(0,T.S$)(e.context.messages,r.titleMsgId):r.title,value:t})}))})),vt(gt(e),"renderResult",(function(){return e.props.result?0===e.props.result.numberOfRecordsMatched?p().createElement("div",null,p().createElement(P.Z,{msgId:"catalog.noRecordsMatched"})):e.renderRecords():e.props.loadingError?e.renderError():null})),vt(gt(e),"renderError",(function(e){return p().createElement(d.Alert,{bsStyle:"danger"},p().createElement(P.Z,{msgId:e||"catalog.error"}))})),vt(gt(e),"renderLoading",(function(){return p().createElement("div",{className:"catalog-results loading"},p().createElement(ct.Z,{size:176}))})),vt(gt(e),"renderPagination",(function(){if(e.props.result){var t=e.props.result.numberOfRecordsMatched,r=e.props.result.numberOfRecordsReturned,n=e.props.searchOptions.startPosition,o=e.props.pageSize,a=Math.floor(n/o),i=Math.ceil(t/o);return p().createElement("div",{className:"catalog-pagination"},p().createElement(d.Pagination,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,bsSize:"small",items:i,maxButtons:5,activePage:a+1,onSelect:e.handlePage}),p().createElement("div",{className:"push-right"},p().createElement(P.Z,{msgId:"catalog.pageInfo",msgParams:{start:n,end:n+r-1,total:t}})))}return null})),vt(gt(e),"renderRecords",(function(){var t,r,n,o,a="",i=!1,l=!1;if(e.props.services&&e.props.services[e.props.selectedService]){var c=e.props.services[e.props.selectedService];O()(c.metadataTemplate)||O()(c.showTemplate)||(i=c.showTemplate,a=c.metadataTemplate),O()(c.hideThumbnail)||(l=c.hideThumbnail)}return p().createElement("div",{className:"catalog-results"},p().createElement(lt,ut({},e.props.gridOptions,{crs:e.props.crs,key:"records",hideThumbnail:l,records:e.props.records.map((function(e){return i&&a?dt(dt({},e),{},{metadataTemplate:a}):e})),clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,source:e.props.source,authkeyParamNames:e.props.authkeyParamNames,catalogURL:e.isValidServiceSelected()&&e.props.services[e.props.selectedService].url||"",service:e.props.services[e.props.selectedService],catalogType:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].type,showTemplate:e.props.services[e.props.selectedService].showTemplate,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,onError:e.props.onError,showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,recordItem:e.props.recordItem,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onAddBackground:e.props.onAddBackground,defaultFormat:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].format,formatOptions:(null===(t=e.props.services[e.props.selectedService])||void 0===t?void 0:t.url)===(null===(r=e.props.service)||void 0===r?void 0:r.url)?e.props.formatOptions:z.QQ,infoFormatOptions:(null===(n=e.props.services[e.props.selectedService])||void 0===n?void 0:n.url)===(null===(o=e.props.service)||void 0===o?void 0:o.url)?e.props.infoFormatOptions:(0,z.B8)(),layerBaseConfig:e.props.layerBaseConfig,onAdd:function(){e.search({services:e.props.services,selectedService:e.props.selectedService})}})))})),vt(gt(e),"renderButtons",(function(){var t=[];return e.props.includeSearchButton&&t.push(p().createElement(w.Z,{bsStyle:"primary",style:e.props.buttonStyle,onClick:function(){return e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})},className:e.props.buttonClassName,key:"catalog_search_button",disabled:e.props.loading||!e.isValidServiceSelected()},p().createElement(P.Z,{msgId:"catalog.search"}))),e.props.includeResetButton&&t.push(p().createElement(w.Z,{style:e.props.buttonStyle,onClick:e.reset,key:"catalog_reset_button"},p().createElement(P.Z,{msgId:"catalog.reset"}))),t})),vt(gt(e),"renderTextSearch",(function(){var t=p().createElement(d.FormControl,{ref:"searchText",type:"text",style:{textOverflow:"ellipsis"},value:e.props.searchText,placeholder:(0,T.S$)(e.context.messages,"catalog.textSearchPlaceholder"),onChange:e.onSearchTextChange,onKeyDown:e.onKeyDown});return e.props.wrapOptions?p().createElement(d.Panel,{collapsible:!0,defaultExpanded:!1,header:(0,T.S$)(e.context.messages,"catalog.options")},t):t})),vt(gt(e),"isValidServiceSelected",(function(){return void 0!==e.props.services[e.props.selectedService]})),vt(gt(e),"search",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.services,n=t.selectedService,o=t.start,a=void 0===o?1:o,i=t.searchText,l=void 0===i?"":i,c=(0,z.p8)(r[n]),s=r[n].type;e.props.onSearch({format:s,url:c,startPosition:a,maxRecords:e.props.pageSize,text:l||"",options:{service:e.props.services[n]}})})),vt(gt(e),"reset",(function(){e.props.onReset()})),vt(gt(e),"handlePage",(function(t){if(t){var r=(t-1)*e.props.pageSize+1;e.search({services:e.props.services,selectedService:e.props.selectedService,start:r,searchText:e.props.searchText})}})),e}return t=i,(r=[{key:"componentDidMount",value:function(){this.props.selectedService&&this.isValidServiceSelected()&&this.props.services[this.props.selectedService].autoload&&this.search({services:this.props.services,selectedService:this.props.selectedService,searchText:this.props.searchText})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e!==this.props&&(("view"===e.mode&&"edit"===this.props.mode||e.services!==this.props.services||e.selectedService!==this.props.selectedService)&&e.active&&this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}),e.active&&!1===this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}))}},{key:"render",value:function(){var e=this;return p().createElement(j.Z,{key:"catalog-BorderLayout",bodyClassName:"ms2-border-layout-body catalog",header:p().createElement(d.Form,null,p().createElement(d.FormGroup,{controlId:"labelService",key:"labelService"},p().createElement(d.ControlLabel,null,p().createElement(P.Z,{msgId:"catalog.service"}))),p().createElement(d.FormGroup,{controlId:"service",key:"service"},p().createElement(d.InputGroup,null,p().createElement(C.ZP,{clearValueText:(0,T.S$)(this.context.messages,"catalog.clearValueText"),noResultsText:(0,T.S$)(this.context.messages,"catalog.noResultsText"),clearable:!0,options:this.getServices(),value:this.props.selectedService,onChange:function(t){return e.props.onChangeSelectedService(t&&t.value?t.value:"")},placeholder:(0,T.S$)(this.context.messages,"catalog.servicePlaceholder")}),this.isValidServiceSelected()&&!this.props.services[this.props.selectedService].readOnly?p().createElement(d.InputGroup.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!1)}},p().createElement(d.Glyphicon,{glyph:"pencil"})):null,p().createElement(d.InputGroup.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!0)}},p().createElement(d.Glyphicon,{glyph:"plus"})))),p().createElement(d.FormGroup,{controlId:"searchText",key:"searchText"},this.renderTextSearch()),p().createElement(d.FormGroup,{controlId:"buttons",key:"buttons"},this.renderButtons(),this.props.layerError?this.renderError(this.props.layerError):null)),footer:this.renderPagination()},this.props.loading?this.renderLoading():this.renderResult())}}])&&mt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(p().Component);vt(ht,"propTypes",{active:s().bool,searchText:s().string,addAuthentication:s().bool,buttonClassName:s().string,buttonStyle:s().object,currentLocale:s().string,loading:s().bool,format:s().string,crs:s().string,gridOptions:s().object,includeSearchButton:s().bool,includeResetButton:s().bool,loadingError:s().object,layerError:s().string,mode:s().string,onChangeCatalogMode:s().func,onChangeText:s().func,onChangeFormat:s().func,onChangeSelectedService:s().func,onPropertiesChange:s().func,onError:s().func,onLayerAdd:s().func,onReset:s().func,onSearch:s().func,onAddBackground:s().func,pageSize:s().number,records:s().array,authkeyParamNames:s().array,recordItem:s().element,result:s().object,searchOptions:s().object,selectedService:s().string,services:s().object,showGetCapLinks:s().bool,wrapOptions:s().bool,zoomToLayer:s().bool,hideThumbnail:s().bool,hideIdentifier:s().bool,hideExpand:s().bool,source:s().string,onAddBackgroundProperties:s().func,modalParams:s().object,layers:s().array,clearModal:s().func,formatOptions:s().array,infoFormatOptions:s().array,layerBaseConfig:s().object,service:s().object}),vt(ht,"contextTypes",{messages:s().object}),vt(ht,"defaultProps",{buttonClassName:"search-button",buttonStyle:{marginBottom:"10px",marginRight:"5px"},currentLocale:"en-US",format:"csw",includeSearchButton:!0,includeResetButton:!1,mode:"view",onChangeCatalogMode:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeSelectedService:function(){},onPropertiesChange:function(){},onError:function(){},onLayerAdd:function(){},onReset:function(){},onSearch:function(){},changeLayerProperties:function(){},pageSize:4,records:[],loading:!1,services:{},wrapOptions:!1,zoomToLayer:!0,formatOptions:z.QQ,layerBaseConfig:{},crs:"EPSG:3857",service:{}});const bt=ht;var Et=r(521554),Ot=r(416919),wt=r(31935),Ct=r(788113),jt=r(675110),Tt=r(308316),Pt=r(38842),kt=r(800827),xt=r(55105);function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function It(){return It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},It.apply(this,arguments)}function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rt(e,t){return Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rt(e,t)}function Zt(e,t){if(t&&("object"===Lt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zt(e){return zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},zt(e)}function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach((function(t){Dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _t=["OpenStreetMap","OpenSeaMap","Stamen"],Gt=(0,S.zB)({searchOptions:Ct.bA,result:Ct.SX,loadingError:Ct.hm,selectedService:Ct.Cb,mode:Ct.eK,services:Ct.b6,servicesWithBackgrounds:Ct.PG,layerError:Ct.Im,active:Ct.$t,dockStyle:function(e){return(0,xt.ic)(e,{height:!0})},searchText:Ct.e8,group:Ct.Mm,source:wt.YL,layers:jt.l2,modalParams:wt.B0,authkeyParamNames:Ct.kS,saving:Ct.dP,openCatalogServiceList:Ct.ZL,service:Ct._S,format:Ct.iH,selectedFormat:Ct.Q7,options:Ct.bA,layerOptions:Ct.n7,tileSizeOptions:Ct._x,currentLocale:Tt.Pz,locales:Tt.Ps,pageSize:Ct.y,loading:Ct.E2,crs:kt.uy,isLocalizedLayerStylesEnabled:Pt.wk,formatsLoading:Ct.BM,formatOptions:Ct.am,infoFormatOptions:Ct.LV}),Ut=(0,y.compose)((0,y.withProps)((function(e){var t=e.result,r=e.selectedFormat,n=e.options,o=e.layerOptions,a=e.services,i=e.selectedService,l=e.locales;return{records:t&&(0,z.eL)(r,t,Nt(Nt({},n),{},{layerOptions:o,service:a[i]}),l)||[]}})),(0,y.defaultProps)({buttonStyle:{marginBottom:"10px",marginRight:"5px"},formatOptions:z.QQ,advancedRasterStyles:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}}),(0,y.branch)((function(e){return"edit"===e.mode}),(0,y.renderComponent)(Et.Z)))(bt),Qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rt(e,t)}(i,e);var t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zt(n);if(o){var r=zt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Zt(this,e)});function i(){return Bt(this,i),a.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e=this,t={group:this.props.group||void 0},r=p().createElement(Ut,It({layerBaseConfig:t},this.props,{services:"backgroundSelector"===this.props.source?this.props.servicesWithBackgrounds:this.props.services}));return p().createElement("div",{id:"catalog-root",className:this.props.active?"catalog-active":"",style:{width:"100%",height:"100%",pointerEvents:"none"}},p().createElement(f.Z,null,(function(t){var n=t.width;return p().createElement(Ot.Z,{open:e.props.active,size:e.props.width/n>1?n:e.props.width,position:"right",bsStyle:"primary",title:p().createElement(P.Z,{msgId:"catalog.title"}),onClose:function(){return e.props.closeCatalog()},glyph:"folder-open",zIndex:1031,style:e.props.dockStyle},p().createElement(d.Panel,{id:e.props.id,style:e.props.panelStyle,className:e.props.panelClassName},r))})))}}])&&Ft(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(p().Component);Dt(Qt,"propTypes",{id:s().string,source:s().string,active:s().bool,searchOnStartup:s().bool,serviceTypes:s().array,wrap:s().bool,wrapWithPanel:s().bool,panelStyle:s().object,panelClassName:s().string,closeCatalog:s().func,closeGlyph:s().string,buttonStyle:s().object,services:s().object,servicesWithBackgrounds:s().object,selectedService:s().string,style:s().object,dockProps:s().object,zoomToLayer:s().bool,isLocalizedLayerStylesEnabled:s().bool,width:s().number,dockStyle:s().object,group:s().string}),Dt(Qt,"defaultProps",{id:"mapstore-metadata-explorer",serviceTypes:[{name:"csw",label:"CSW"},{name:"wms",label:"WMS"},{name:"wmts",label:"WMTS"},{name:"tms",label:"TMS",allowedProviders:_t},{name:"wfs",label:"WFS"}],active:!1,wrap:!1,modal:!0,wrapWithPanel:!1,panelStyle:{zIndex:100,overflow:"hidden",height:"100%"},panelClassName:"catalog-panel",closeCatalog:function(){},closeGlyph:"1-close",zoomToLayer:!0,width:660,dockProps:{dimMode:"none",fluid:!1,position:"right",zIndex:1030},dockStyle:{},group:null,services:{},servicesWithBackgrounds:{}});var Vt=(0,m.connect)(Gt,{clearModal:g.V3,onSearch:A.tt,onLayerAdd:A.A4,closeCatalog:A.wl,onChangeFormat:A.BG,onChangeServiceFormat:A.i3,onChangeUrl:A.X7,onChangeType:A.XM,onChangeTitle:A.r1,onChangeMetadataTemplate:A.Wf,onChangeText:A.XW,onChangeServiceProperty:A.L8,onChangeSelectedService:A.Dw,onChangeCatalogMode:A.In,onAddService:A.M3,onToggleAdvancedSettings:A.Ts,onToggleThumbnail:A.XS,onToggleTemplate:A.IT,onDeleteService:A.wo,onError:A.vG,onAddBackgroundProperties:g.US,onFocusServicesList:A.dL,onPropertiesChange:h.He,onAddBackground:g.pW,onFormatOptionsFetch:A.tx,onToggle:v.Xi.bind(null,"backgroundSelector",null),onLayerChange:v.Xg.bind(null,"backgroundSelector"),onStartChange:v.Xg.bind(null,"backgroundSelector","start")})(Qt);const Wt={MetadataExplorerPlugin:l()(Vt,{BurgerMenu:{name:"metadataexplorer",position:5,text:p().createElement(P.Z,{msgId:"catalog.title"}),tooltip:"catalog.tooltip",icon:p().createElement(d.Glyphicon,{glyph:"folder-open"}),action:v.Xg.bind(null,"metadataexplorer","enabled",!0,!0),doNotHide:!0},BackgroundSelector:{name:"MetadataExplorer",doNotHide:!0},TOC:{name:"MetadataExplorer",doNotHide:!0}}),reducers:{catalog:r(618163).Z},epics:r(856175).Z(b.Z)}},507872:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(670570),o=r.n(n),a=r(904925),i=r.n(a),l=r(650277),c=r.n(l),s=r(25518),u=r.n(s),p=r(464322),d=r.n(p),f=r(535339),m=r.n(f),y=r(507790),S=r.n(y),g=r(728753),A=r.n(g),v=r(378465),h=r.n(v),b=r(328424),E=r.n(b),O=r(76886),w=r.n(O),C=r(337679),j=r.n(C),T=r(807909),P=r.n(T);const k={google:{HYBRID:j(),ROADMAP:o(),TERRAIN:i(),SATELLITE:c()},bing:{Aerial:u(),AerialWithLabels:E()},osm:{mapnik:d()},mapquest:{osm:P()},ol:{undefined:S()},nasagibs:{Night2012:h()},OpenTopoMap:{OpenTopoMap:w()},unknown:A(),s2cloudless:{"s2cloudless:s2cloudless":m()}}},618163:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(931273),o=r(881808),a=r(761868),i=r(414293),l=r.n(i),c=r(727418),s=r.n(c),u=r(455877),p=r.n(u),d=["isNew"];function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={url:"",type:"wms",title:"",isNew:!0,autoload:!1,showAdvancedSettings:!1,showTemplate:!1,hideThumbnail:!1,metadataTemplate:"<p>${description}</p>"};const A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:{services:{},selectedService:"",newService:{}},delayAutoSearch:1e3,loading:!1,pageSize:4,services:{},selectedService:"",newService:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.eA:return y(y({},e),{},{saving:t.status});case n.HR:return s()({},e,{result:t.result,searchOptions:t.searchOptions,loadingError:null,layerError:null,loading:!1});case n.xi:return s()({},e,{result:null,loadingError:null,searchOptions:null});case n.vK:return s()({},e,{result:null,searchOptions:null,loadingError:t.error,loading:!1,layerError:null});case n.nm:return s()({},e,{result:null,loadingError:null,format:t.format,layerError:null});case n.QF:return s()({},e,{layerError:t.error});case n.uN:return s()({},e,{newService:t.isNew?g:s()({},e.services&&e.services[e.selectedService||""]||{},{oldService:e.selectedService||""}),mode:t.mode,result:null,loadingError:null,layerError:null});case o.ok:return e&&!l()(e.default)?t.config&&!l()(t.config.catalogServices)?s()({},e,{services:t.config.catalogServices.services,selectedService:t.config.catalogServices.selectedService}):s()({},e,{services:e.default.services,selectedService:e.default.selectedService}):e;case n.YO:return(0,a.t8)("openCatalogServiceList",t.status,e);case n.CO:return(0,a.t8)("searchOptions.text",t.text,e);case n.Mt:return(0,a.t8)("newService.".concat(t.property),t.value,e);case n.im:return(0,a.t8)("newService.title",t.title,e);case n.PR:return(0,a.t8)("newService.url",t.url,e);case n.Oq:return(0,a.t8)("newService.format",t.format,e);case n.$X:var r=t.newType.toLowerCase(),i={};return"csw"!==r&&(i={showTemplate:!1,metadataTemplate:""}),s()({},e,{newService:s()({},e.newService,y({type:r},i))});case n.wI:var c=t.service,u=c.isNew,m=f(c,d),A=u?m.title+p()():e.selectedService,v=s()({},e.services,S({},A,m));return s()({},e,{services:v,selectedService:A,mode:"view",result:null,loadingError:null,searchOptions:s()({},e.searchOptions,{text:""}),layerError:null});case n.zZ:return t.service!==e.selectedService?s()({},e,{selectedService:t.service,result:null,loadingError:null,layerError:null}):e;case n.bv:var h,b="";return delete(h=s()({},e.services))[t.service],Object.keys(h).length&&(b=h[Object.keys(h)[0]].title),s()({},e,{services:h,selectedService:b,mode:"view",result:null,loadingError:null,layerError:null});case n.Kz:return(0,a.t8)("newService.hideThumbnail",!e.newService.hideThumbnail,e);case n.cS:return(0,a.t8)("loading",t.loading,e);case n.Bz:return(0,a.t8)("newService.metadataTemplate",t.metadataTemplate,e);case n.l3:var E=(0,a.t8)("newService.showTemplate",!e.newService.showTemplate,e);return E.newService.showTemplate&&(E=(0,a.t8)("newService.metadataTemplate",E.newService.metadataTemplate||"<p>${description}</p>",E)),E;case n.vg:return(0,a.t8)("newService.showAdvancedSettings",!e.newService.showAdvancedSettings,e);case n.do:return(0,a.t8)("formatsLoading",t.loading,e);case n.lb:return(0,a.t8)("newService.supportedFormats",t.formats,(0,a.t8)("newService.formatUrlUsed",t.url,e));default:return e}}},55105:(e,t,r)=>{"use strict";r.d(t,{Nr:()=>p,ic:()=>d,Jz:()=>m,VM:()=>y,CF:()=>S});var n=r(91175),o=r.n(n),a=r(800827),i=r(552259);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){return e.maplayout&&e.maplayout.layout||{}},p=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){return c(c({},e),{},s({},t,r[t]))}),{})||{}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=u(e),n=!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})));return n},m=function(e){return f(e,[{key:"right",value:658}])},y=function(e){return f(e,[{key:"bottom",value:30,type:"not"}])},S=function(e){var t=(0,a.Od)(e),r=p(e);return r&&t&&t.size&&{left:(0,i.parseLayoutValue)(r.left,t.size.width),bottom:(0,i.parseLayoutValue)(r.bottom,t.size.height),right:(0,i.parseLayoutValue)(r.right,t.size.width),top:(0,i.parseLayoutValue)(r.top,t.size.height)}}},452702:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(923645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".msgapi div.record-grid {\n    padding-left: 0;\n    padding-right: 0;\n}\n\n.msgapi div.record-grid .record-item{\n    height: auto;\n}\n.msgapi div.record-grid .record-item .panel-body{\n    padding: 0;\n}\n\n.msgapi #mapstore-catalog-panel button.search-button {\n    margin-bottom: 10px;\n}\n\n.msgapi #mapstore-catalog-panel .record-item {\n    min-height: 150px;\n}\n.msgapi #catalog-root {\n    position: static!important;\n}\n\n/*\n!important is needed because the library we used\nuse inline style which cannot be overridden unless\nwe use !important*/\n@media (max-width: 500px) {\n    .msgapi div .catalog-sidebar.nav-menu {\n        width: 100% !important\n    }\n}\n\n.msgapi #mapstore-metadata-explorer{\n    margin-bottom: 0\n}\n",""]);const a=o},203932:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/catalog/img/default.jpg"},25518:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/Aerial.jpg"},328424:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/AerialWithLabels.jpg"},337679:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/HYBRID.jpg"},378465:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/NASA_NIGHT.jpg"},76886:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/OpenTopoMap.jpg"},670570:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/ROADMAP.jpg"},650277:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/SATELLITE.jpg"},904925:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/TERRAIN.jpg"},728753:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/dafault.jpg"},464322:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/mapnik.jpg"},807909:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/mapquest-osm.jpg"},507790:e=>{e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAD1APUDAREAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGwgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//EABQQAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQEAAQUCcH//xAAUEQEAAAAAAAAAAAAAAAAAAACQ/9oACAEDAQE/AXB//8QAFBEBAAAAAAAAAAAAAAAAAAAAkP/aAAgBAgEBPwFwf//EABQQAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQEABj8CcH//xAAUEAEAAAAAAAAAAAAAAAAAAACQ/9oACAEBAAE/IXB//9oADAMBAAIAAwAAABCSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSf/8QAFBEBAAAAAAAAAAAAAAAAAAAAkP/aAAgBAwEBPxBwf//EABQRAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQIBAT8QcH//xAAUEAEAAAAAAAAAAAAAAAAAAACQ/9oACAEBAAE/EHB//9k="},535339:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/s2cloudless.jpg"}}]);