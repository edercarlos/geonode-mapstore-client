(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[9061],{394943:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>ee});var a=r(989255),n=r(227361),l=r.n(n),s=r(91175),o=r.n(s),i=r(701469),c=r.n(i),u=r(941106),y=r.n(u),f=r(545578),b=r.n(f),d=r(197395),m=r(580416),p=r(460604),v=r(690825),g=r(680833),S=r(782904),O=r(624262),h=r(396909),w=r(409082),N=r(375875),j=r.n(N),E=r(984596),T=r.n(E),U=r(99009);function P(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const W=function(e,t,r){var a=e+"layers/"+t+".json";return j().get(a,r).then((function(e){return e.data&&e.data.layer}))},V=function(e){var t=e.baseUrl,r=e.layerName,a=e.styles,n=void 0===a?[]:a,l=e.options,s=void 0===l?{}:l,o=(0,U.$N)(r),i=o.name,c=o.workspace,u="".concat(t,"rest/").concat(c&&"workspaces/".concat(c,"/")||"","layers/").concat(i,".json");return j().get(u,s).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[],a=n.map((function(e){return e.name})),l=r.filter((function(e){var t=e.name;return-1===a.indexOf(t)}));return{layer:M(M({},t),{},{styles:{"@class":"linked-hash-set",style:l}})}})).then((function(e){return j().put(u,e).then((function(){return e}))}))},A=function(e){var t=e.baseUrl,r=e.layerName,a=e.styles,n=void 0===a?[]:a,l=e.options,s=void 0===l?{}:l,o=(0,U.$N)(r),i=o.name,c=o.workspace,u="".concat(t,"rest/").concat(c&&"workspaces/".concat(c,"/")||"","layers/").concat(i,".json");return j().get(u,s).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[];return{layer:M(M({},t),{},{styles:{"@class":"linked-hash-set",style:[].concat(P(r),P(n))}})}})).then((function(e){return j().put(u,e).then((function(){return e}))}))},x=function(e){var t=e.baseUrl,r=e.layerName,a=e.styleName,n=e.options,l=void 0===n?{}:n,s=(0,U.$N)(r),o=s.name,i=s.workspace,c="".concat(t,"rest/").concat(i&&"workspaces/".concat(i,"/")||"","layers/").concat(o,".json");return j().get(c,l).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[],n=t.defaultStyle||{},l=b()([n].concat(P(r)),"name");return{layer:M(M({},t),{},{defaultStyle:{name:a},styles:{"@class":"linked-hash-set",style:l}})}})).then((function(e){return j().put(c,e).then((function(){return e}))}))};var F=r(893222),$=r(675110),Z=r(607147),C=r(108954),L=["name","workspace"];function B(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,l=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(a=r.next()).done)&&(l.push(a.value),!t||l.length!==t);s=!0);}catch(e){o=!0,n=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw n}}return l}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var G=function(e){var t=e.status,r=e.styleName,n=e.baseUrl;return"edit"===t?a.Observable.defer((function(){return w.ZP.getStyleCodeByName({baseUrl:n,styleName:r}).then((function(e){return(0,U.co)(e).then((function(t){return[e,t]})).catch((function(){return[e,!1]}))}))})).switchMap((function(e){var t,r,n=J(e,2),l=n[0],s=n[1];return a.Observable.of((0,h.FU)({languageVersion:l.languageVersion,code:l.code,templateId:"",format:l.format,init:!0}),(0,h.bB)(s?{editorType:"textarea",styleJSON:null}:{editorType:(null==l||null===(t=l.metadata)||void 0===t?void 0:t.msEditorType)||"textarea",styleJSON:null==l||null===(r=l.metadata)||void 0===r?void 0:r.msStyleJSON}))})).catch((function(e){return a.Observable.of((0,h.Fe)("edit",e))})):a.Observable.empty()},H=function(e){var t=e.styleName,r=e.baseUrl,n=e.onSuccess$,l=e.onError$;return a.Observable.defer((function(){return w.ZP.deleteStyle({baseUrl:r,styleName:t})})).switchMap((function(){return n||a.Observable.empty()})).catch((function(){return l||a.Observable.empty()}))},q=function(e){var t=e.baseUrl,r=e.update,n=e.code,l=e.format,s=e.styleName,o=e.status,i=e.languageVersion,u=e.options,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a.Observable.defer((function(){return w.ZP[r?"updateStyle":"createStyle"]({baseUrl:t,code:n,format:l,styleName:s,languageVersion:i,options:u})})).switchMap((function(){var e;return c()(y)&&(e=a.Observable).of.apply(e,[(0,h.Wm)()].concat(B(y)))||y})).catch((function(e){var t;return(t=a.Observable).of.apply(t,[(0,h.Fe)(o,e),(0,h.Wm)()].concat(B(f)))})).startWith((0,h.pt)(o))};function Q(e,t){return!t&&e.availableStyles?a.Observable.of((0,m.Xy)({availableStyles:e.availableStyles}),(0,h.Wm)()):(0,g.kB)(e).switchMap((function(t){var r=(0,O.IA)(t);return r.availableStyles?a.Observable.of((0,m.Xy)({availableStyles:r.availableStyles}),(0,m.tV)(e.id,"layer",_({},r)),(0,h.Wm)()):a.Observable.of((0,h.Fe)("availableStyles",{status:401}),(0,h.Wm)())})).catch((function(e){var t=-1!==e.message.indexOf("could not be unmarshalled")?"parsingCapabilities":"global";return a.Observable.of((0,h.Fe)(t,e),(0,h.Wm)())})).startWith((0,h.pt)("global"))}function Y(e){return r.e(2568).then(r.t.bind(r,402568,23)).then((function(t){return(0,t.default)(e)}))}const ee={toggleStyleEditorEpic:function(e,t){return e.ofType(h.vZ).filter((function(){return!(0,F.aN)(t.getState())})).switchMap((function(e){var r=t.getState(),n=(0,$.jN)(r),s=!!l()(n,"options.availableStyles");if(!e.enabled)return function(e){var t=(0,F.gc)(e),r=(0,F.Z0)(e).baseUrl,n=void 0===r?"":r;return a.Observable.of((0,h.l1)(),(0,p.fU)({owner:U.s1})).merge(t?H({styleName:t,baseUrl:n}):a.Observable.empty())}(r);if((0,F.ji)(r)&&s)return a.Observable.empty();var o=e.layer||(0,$.Iz)(r);if(!o||o&&!o.url)return a.Observable.empty();var i=(0,O.Nd)(o);if(!i)return Q(o);var c=o.url.split(i),u="".concat(c[0]).concat(i),y=(0,F.Z0)(r);return a.Observable.concat(a.Observable.of((0,h.pt)("global"),(0,h.l1)()),a.Observable.defer((function(){return(0,C.eb)({baseUrl:u,styleService:y})})).switchMap((function(e){return a.Observable.concat(a.Observable.of((0,h.E0)(e)),a.Observable.defer((function(){return W(u+"rest/",o.name)})).switchMap((function(e){var t,r=(null==e||null===(t=e.styles)||void 0===t?void 0:t.style)||[],n=b()([e.defaultStyle].concat(B(r)),"name");return 0===n.length?a.Observable.of((0,h.Fe)("availableStyles",{status:401}),(0,h.Wm)()):a.Observable.defer((function(){return Promise.all([w.ZP.getStylesInfo({baseUrl:u,styles:n}),(0,g.kB)(o).toPromise().then((function(e){return e})).catch((function(){return null}))])})).switchMap((function(e){var t=J(e,2),r=t[0],n=t[1],l=n&&(0,O.IA)(n),s=((null==l?void 0:l.availableStyles)||[]).map((function(e){return _(_({},e),(0,U.$N)(e.name))})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return t})),i=s.length>0?r.map((function(e){var t=(0,U.$N)(e.name),r=s.find((function(e){return e.name===t.name}))||{},a=(r.name,r.workspace,function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},l=Object.keys(e);for(a=0;a<l.length;a++)r=l[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)r=l[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(r,L));return a?_(_({},a),e):e})):r;return a.Observable.of((0,p.W)(o.id,U.s1,"override",{}),(0,m.Xy)({availableStyles:i}),(0,m.tV)(o.id,"layer",{availableStyles:i}),(0,h.Wm)())}))})).catch((function(){return Q(o,!0)})))})))}))},updateLayerOnStatusChangeEpic:function(e,t){return e.ofType(h.g$).filter((function(e){return!!e.status})).switchMap((function(r){var n=t.getState(),l=(0,F.Vf)(n),s=l&&l.params||{},o=l&&!l.describeFeatureType&&(0,v.H)(l.url,l,{query:s}),i=(0,F.i7)(n)||l.availableStyles&&l.availableStyles[0]&&l.availableStyles[0].name,c=(0,F.Z0)(n).baseUrl,u=void 0===c?"":c;return o&&function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(r=a.Observable).of.apply(r,[(0,h.pt)("global")].concat(B(l))).merge(e.ofType(m.K$).filter((function(){var e=(0,$.Iz)(t.getState());return n(e)})).switchMap((function(){var e=(0,$.Iz)(t.getState());return s(e)})).catch((function(e){return a.Observable.of((0,h.Fe)("global",e),(0,h.Wm)())})).takeUntil(e.ofType(h.E2)))}(e,t,(function(e){return e&&e.describeLayer}),[o],(function(e){return a.Observable.concat(G({status:r.status,styleName:i,baseUrl:u}),a.Observable.of((0,h.xR)(!(e&&e.describeLayer&&401===e.describeLayer.error)),(0,h.Wm)()))}))||G({status:r.status,styleName:i,baseUrl:u})}))},updateTemporaryStyleEpic:function(e,t){return e.ofType(h.TB,h.DX).switchMap((function(e){var r=t.getState(),a=(0,F.gc)(r),n=(0,F.Vf)(r),l=(0,U.$N)(n.name).workspace,s=e.format&&e.format!==(0,F.iB)(r),o=a||"".concat(l?"".concat(l,":"):"").concat((0,U.Vi)()),i=e.format||(0,F.iB)(r),c=(0,F.ex)(r),u=(0,F.Z0)(r).baseUrl,y=void 0===u?"":u,f=(0,F.j5)(r),b="sld"===i&&(e.code||"").match(/version=\"1\.1\.0\"/)&&{version:"1.1.0"}||e.format&&!e.languageVersion&&{version:"1.0.0"}||e.languageVersion||{version:"1.0.0"},m=f.version!==b.version?{params:{raw:!0}}:{},v=b,g=function(t){return q({update:!0,code:e.code,format:i,styleName:t,status:c,baseUrl:y,languageVersion:v,options:m},[(0,p.B1)(U.s1,[{style:t,_v_:Date.now(),singleTile:!0}]),(0,h.k5)({temporaryId:t,templateId:e.templateId||"",code:e.code,format:i,init:e.init,languageVersion:v})],"edit"===c?[]:[(0,d.vU)({title:"styleeditor.updateTmpErrorTitle",message:"styleeditor.updateTmpStyleErrorMessage",uid:"updateTmpStyleError",autoDismiss:5})])},S=("css"===i?"* { stroke: #888888; }":"sld"===i&&'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n')||"",O=function(e){return q({code:S,format:i,styleName:e,status:c,baseUrl:y},g(e),[(0,d.vU)({title:"styleeditor.createTmpErrorTitle",message:"styleeditor.createTmpStyleErrorMessage",uid:"createTmpStyleError",autoDismiss:5}),(0,h.k5)({temporaryId:null,templateId:"",code:"",format:"",init:"",languageVersion:null})])};return s&&a&&H({styleName:a,baseUrl:y,onSuccess$:O("".concat(l?"".concat(l,":"):"").concat((0,U.Vi)())),onError$:g(o)})||a&&g(o)||O(o)}))},createStyleEpic:function(e,t){return e.ofType(h.vA).switchMap((function(e){var r=t.getState(),n=(0,F.gB)(r),l=(0,F.Vf)(r),s=(0,U.$N)(l.name).workspace,i="".concat(s?"".concat(s,":"):"").concat((0,U.nK)(e.settings)),c=(0,F.iB)(r),u=e.settings||{},f=u.title,b=void 0===f?"":f,v=u._abstract,g=void 0===v?"":v,S=(0,F.Z0)(r).baseUrl,O=void 0===S?"":S,N=_({title:b,description:g},{msStyleJSON:null,msEditorType:"visual"}),j=y()(n)({styleTitle:b,styleAbstract:g});return a.Observable.defer((function(){return Y(j).then((function(e){return w.ZP.createStyle({baseUrl:O,code:j,format:c,styleName:i,metadata:_(_({},N),{},{msMD5Hash:e})})}))})).switchMap((function(){return a.Observable.of((0,p.B1)(U.s1,[{}]),(0,m.Xy)({style:i||""},!0),(0,h.Nf)(""),(0,h.Wm)()).merge(function(e){var t=e.baseUrl,r=e.layer,n=e.styleName,l=e.format,s=e.title,i=e._abstract,c=e.metadata;return a.Observable.defer((function(){return A({baseUrl:t,layerName:r.name,styles:[{name:n}]})})).switchMap((function(){var e=_({filename:"".concat(n,".").concat(l),format:l,name:n,title:s,_abstract:i},c&&{metadata:c}),t=o()(r.availableStyles),u=r.availableStyles&&[t,e].concat(B(r.availableStyles.filter((function(e,t){return t>0}))))||[e];return a.Observable.of((0,m.Xy)({availableStyles:u},!0),(0,h.Wm)())})).catch((function(){return a.Observable.of((0,h.Wm)())})).startWith((0,h.pt)("global"))}({layer:l,styleName:i,format:c,title:b,_abstract:g,baseUrl:O,metadata:N}))})).catch((function(e){return a.Observable.of((0,h.Fe)("",e),(0,h.Wm)(),(0,d.vU)({title:"styleeditor.createStyleErrorTitle",message:"styleeditor.createStyleErrorMessage",uid:"createStyleError",autoDismiss:5}))})).startWith((0,h.pt)(""))}))},updateStyleCodeEpic:function(e,t){return e.ofType(h.ch).switchMap((function(){var e=t.getState(),r=(0,F.iB)(e),n=(0,F.j5)(e),l=(0,F.gB)(e),s=(0,F.i7)(e),o=(0,F.gc)(e),i=(0,F.Vf)(e),c=(0,F.Z0)(e).baseUrl,u=void 0===c?"":c,y=(0,F.WW)(e)||{},f={msStyleJSON:y.styleJSON||null,msEditorType:y.editorType},b=(i.availableStyles||[]).map((function(e){return e.name===s?_(_({},e),{},{metadata:_(_({},e.metadata),f)}):e}));return a.Observable.defer((function(){return Y(l).then((function(e){return w.ZP.updateStyle({baseUrl:u,code:l,format:r,styleName:s,languageVersion:n,options:{params:{raw:!0}},metadata:_(_({},f),{},{msMD5Hash:e})})}))})).switchMap((function(){return a.Observable.of((0,h.Wm)(),(0,m.tV)(i.id,"layer",{_v_:Date.now(),availableStyles:b}),(0,m.Xy)({availableStyles:b}),(0,h.k5)({temporaryId:o,templateId:"",code:l,format:r,init:!0,languageVersion:n}),(0,d.Vp)({title:"styleeditor.savedStyleTitle",message:"styleeditor.savedStyleMessage",uid:"savedStyleTitle",autoDismiss:5}))})).catch((function(e){return a.Observable.of((0,h.Fe)("global",e),(0,h.Wm)(),(0,d.vU)({title:"styleeditor.updateStyleErrorTitle",message:"styleeditor.updateStyleErrorMessage",uid:"updateStyleError",autoDismiss:5}))})).startWith((0,h.pt)("global"))}))},deleteStyleEpic:function(e,t){return e.ofType(h.j1).filter((function(e){return!!e.styleName})).switchMap((function(e){var r=e.styleName,n=t.getState(),l=(0,F.Vf)(n),s=(0,F.Z0)(n).baseUrl,o=void 0===s?"":s,i=(0,Z.tL)(n),c=(0,Z.Gd)(n);return a.Observable.defer((function(){return V({baseUrl:o,layerName:l.name,styles:[{name:r}]})})).switchMap((function(){var e=l.availableStyles&&l.availableStyles.filter((function(e){return e.name!==r}))||[];return a.Observable.concat(a.Observable.of((0,m.Xy)({style:"",availableStyles:e},!0),(0,h.Wm)(),(0,S.Xg)("layersettings","originalSettings",_(_({},i),{},{style:""})),(0,S.Xg)("layersettings","initialSettings",_(_({},c),{},{style:""}))),H({styleName:r,baseUrl:o,onSuccess$:a.Observable.of((0,d.Vp)({title:"styleeditor.deletedStyleSuccessTitle",message:"styleeditor.deletedStyleSuccessMessage",uid:"deletedStyleSuccess",autoDismiss:5})),onError$:a.Observable.of((0,d.vU)({title:"styleeditor.deletedStyleErrorTitle",message:"styleeditor.deletedStyleErrorMessage",uid:"deletedStyleError",autoDismiss:5}))}))})).catch((function(){return a.Observable.of((0,h.Wm)())})).startWith((function(){return a.Observable.of((0,h.pt)("global"))}))}))},setDefaultStyleEpic:function(e,t){return e.ofType(h.rb).switchMap((function(){var e=t.getState(),r=(0,F.Z0)(e).baseUrl,n=void 0===r?"":r,l=(0,F.Vf)(e),s=(0,F.i7)(e);return a.Observable.defer((function(){return x({baseUrl:n,layerName:l.name,styleName:s})})).switchMap((function(){var e=l.availableStyles.filter((function(e){var t=e.name;return s===t})),t=l.availableStyles.filter((function(e){var t=e.name;return s!==t})),r=[].concat(B(e),B(t));return a.Observable.of((0,m.Xy)({availableStyles:r},!0),(0,d.Vp)({title:"styleeditor.setDefaultStyleSuccessTitle",message:"styleeditor.setDefaultStyleSuccessMessage",uid:"setDefaultStyleSuccess",autoDismiss:5}),(0,h.Wm)())})).startWith((0,h.pt)("global")).catch((function(){return a.Observable.of((0,d.vU)({title:"styleeditor.setDefaultStyleErrorTitle",message:"styleeditor.setDefaultStyleErrorMessage",uid:"setDefaultStyleError",autoDismiss:5}),(0,h.Wm)())}))}))}}},532244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r(396909),n=r(747037),l=r.n(n);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.wL:return o(o({},e),{},{service:t.service,canEdit:t.canEdit});case a.Nm:return o(o({},e),{},{canEdit:t.canEdit});case a.gF:return o(o({},e),{},{temporaryId:t.temporaryId,templateId:t.templateId,code:t.code,format:t.format,error:null,languageVersion:t.languageVersion,initialCode:t.init?t.code:e.initialCode});case a.g$:return""===t.status?o(o({},e),{},{status:t.status,code:"",templateId:"",initialCode:"",addStyle:!1,error:{}}):o(o({},e),{},{status:t.status});case a.dJ:return{service:e.service&&o({},e.service)||{},canEdit:e.canEdit,loading:e.loading};case a.uz:return o(o({},e),{},{addStyle:t.add});case a.lX:return o(o({},e),{},{loading:!t.status||t.status});case a.E2:return o(o({},e),{},{loading:!1,enabled:!0});case a.mF:var r,n,s,c=(null==t||null===(r=t.error)||void 0===r?void 0:r.statusText)||(null==t||null===(n=t.error)||void 0===n?void 0:n.message)||"",u=l()(null==t||null===(s=t.error)||void 0===s?void 0:s.messageId)&&{messageId:t.error.messageId},y=c.match(/line\s([\d]+)|column\s([\d]+)|lineNumber:\s([\d]+)|columnNumber:\s([\d]+)/g),f=y&&2===y.length&&y.reduce((function(e,t){var r=t.split(" "),a=r[0].replace(/Number:/g,""),n=parseFloat(r[1]);return a&&!isNaN(n)&&o(o({},e),{},i({},a,n))||o({},e)}),o({message:c},u))||o({message:c},u);return o(o({},e),{},{loading:!1,canEdit:!(t.error&&(401===t.error.status||403===t.error.status||t.error.message&&-1!==t.error.message.indexOf("could not be unmarshalled"))),error:o(o({},e.error),{},i({},t.status||"global",o({status:t.error&&t.error.status||400},f)))});case a.dk:return o(o({},e),{},{metadata:o(o({},e.metadata),t.metadata)});default:return e}}}}]);